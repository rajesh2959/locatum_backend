{{#partial "page"}}


<div id="page-content-wrapper" class="acc-sec">
	<div class="container-fluid">
		<h4 class="acc-sec-title"></h4>
		<div class="col-md-12 venue-details" >
			<div class="view-details">
				<div class="col-md-10 col-sm-10 col-xs-10" style="margin-top: -8px;"><ul>
					<li class="displayBlockName"><img
						src="/facesix/static/qubercomm/images/q-cgf-ble.png" alt=""
						id="" style="width:80px;margin-left:-10px;"> <label class="venue-name" id="fimob" style="margin-left:-12px;">Gateway Configuration</label></li>
				</ul></div>
				
				{{#if SYS_WRITE}}
				<div class="col-md-2 display-inline">
				<a href="/facesix/web/finder/device/configure?cid={{cid}}&sid={{sid}}&spid={{spid}}&param=1" class="btn btn-primary btn3d btn-config-venue addhide pull-right addDevice" style="margin-right:373px;"><i
					class="fa fa-plus"></i> Add Gateway</a>
				</div>
				
				<div class="col-md-2 display-inline">
				<a href="/facesix/web/finder/device/reglist?cid={{cid}}&sid={{sid}}&spid={{spid}}" class="btn btn-primary btn3d btn-config-venue addhide pull-right" style="margin-right:0px;margin-top:-40px;"><i
					class="fa fa-bookmark"></i></i> Non-Configured Gateways</a>
				</div>
				
				{{/if}}
				
				<div class="col-md-2 display-inline">
				<a href="/facesix/finderDeviceInfo?cid={{cid}}&sid={{sid}}&spid={{spid}}" class="btn btn-primary btn3d btn-config-venue addhide pull-right" style="margin-right:220px;margin-top:-41px;"><i
					class="fa fa-bluetooth-b"></i></i> Gateway Status</a>
				</div>
				<div style="margin-bottom: 10px"></div>
			</div>
		</div>
	</div>

	<style>
	.ser{
	 margin-right: 41px;
	}
	@media screen and (max-width: 768px){
		.ser{
		 margin-right: 25px;
		}
		#fimob {	    
	    margin-left: -7px !important;
		}
	}
.view-details ul li { margin-right: 0px;}
.view-details ul li .venue-name{ border-bottom: 0px solid #2496d8; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;}
.pulse1 {
	position: relative;
	text-align:center;
	box-shadow: 0 0 0 0 #A84155;
	border-radius: 5px;
	background-size:cover;
	background: #000;
	background-repeat: no-repeat;
	color: #fff;
	text-decoration: none;
	margin: auto;
	cursor: pointer;
	display: block;
	-webkit-animation: pulse1 2.25s infinite cubic-bezier(0.1, 0, 0, 1);
	-moz-animation: pulse1 2.25s infinite cubic-bezier(0.1, 0, 0, 1);
	-ms-animation: pulse1 2.25s infinite cubic-bezier(0.1, 0, 0, 1);
	animation: pulse1 2.25s infinite cubic-bezier(0.1, 0, 0, 1);
	 width: 30%;
}
@-webkit-keyframes pulse1 {to {box-shadow: 0 0 0 10px rgba(232, 76, 61, 0);}}
@-moz-keyframes pulse1 {to {box-shadow: 0 0 0 10px rgba(232, 76, 61, 0);}}
@-ms-keyframes pulse1 {to {box-shadow: 0 0 0 10px rgba(232, 76, 61, 0);}}
@keyframes pulse1 {to {box-shadow: 0 0 0 10px rgba(232, 76, 61, 0);}}
@media screen and (max-width: 768px){
	.padding-device {    	    
	    margin-left: -20px !important;
	    margin-right: -20px !important;
	    padding: 0px !important;
	    }
}
.selected{ 
background-color: rgba(211,211,211,.7);
color: black;
}
table{
cursor: default;
}

</style>

	<br><br>
	<div class="add-uid-form pull-right display-inline search-uid ser">
				<div class="lth-right searchUID">
					<div class="search-opt">
						<form action="/facesix/web/finder/device/devboard" id="target">
							<div class="form-group">
								<div class="search-box">
									<span class="icon" id="searchClick">
										<i class="fa fa-search " aria-hidden="true"></i>
									</span>
									<input type="hidden" name="sid" value="{{sid}}">
									<input type="hidden" name="cid" value="{{cid}}">
									<input type="hidden" name="place" value="finderconfig">
									<input type="search" name = "uid" id="click" class="form-control search-align" placeholder="">
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
	<div  style="padding:10px 30px;">
		
		
		<div class="col-md-15 padding-device padding-right-0">
			<div class="chart-box table-chart-box" style="margin-left:11px;margin-right:13px;"></div>
		</div>	
		<!-- <div class="col-md-15 padding-device padding-right-0">
			<div class="chart-box acl-table-chart-box" style="margin-left:11px;margin-right:13px;"></div>
		</div> -->
		<div class="col-md-15 padding-device padding-right-0">
			<div class="chart-box bl-table-chart-box" style="margin-left:11px;margin-right:13px;"></div>
		</div>	
		</div>
	</div>

	<div class="savearea" id="reposition-mode" class="reposition-mode" style="display:none;position:fixed;">
	<div class="savearea_bottom">
			<div class="left-section">
				<label>Are you sure you want to delete this UID?</label>
			</div>
			<div class="rightsection">
				<ul class="list-unstyled">
					<li id="cancelDelete">
						<label>
							
						</label>
						<span >
							Cancel
						</span>
					</li>
					<li id="deleteItem">
						<label>
						</label>
						<span class="color2" >
							OK
						</span>
					</li>
				</ul>
			</div>
			</div>
		</div>
		
	<div class="saveareaone" id="reposition-mode" class="reposition-mode" style="display:none;position:fixed;">
	<div class="saveareaone_bottom">
			<div class="left-section">
				<label>Are you sure you want to Enable/Disable Log ?</label>
			</div>
			<div class="rightsection">
				<ul class="list-unstyled">
					<li id="cancel">
						<label>
							
						</label>
						<span >
							Cancel
						</span>
					</li>
					<li onclick="selectChild()">
						<label>
						</label>
						<span class="color2" >
							OK
						</span>
					</li>
				</ul>
			</div>
			</div>
		</div>
		
<!-- js -->
<script src="/facesix/static/qubercomm/js/jquery-2.1.4.min.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/jquery_validate_min_js.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/form-validations.js" type="text/javascript"></script>
<script src="https://jqueryvalidation.org/files/dist/additional-methods.min.js"></script>

<script type="text/javascript" src="/facesix/static/qubercomm/js/jquery.nicescroll.min.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/jquery.mobile-events.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/common.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/handlebars.min.js"></script>
<script src="/facesix/static/finder/js/finderscan.js" type="text/javascript"></script>
<script type="text/javascript" src="/facesix/static/finder/js/script.js"></script>

<script type="text/javascript" src="/facesix/static/qubercomm/js/snap.svg-min.js"></script>
<script src="/facesix/static/qubercomm/js/jqpanzoom.js" type="text/javascript"></script>
<script src="/facesix/static/qubercomm/js/d3.v3.js"></script>
<script type="text/javascript" src="/facesix/static/qubercomm/js/underscore-min.js"></script>
<link rel="stylesheet" type="text/css" href="/facesix/static/finder/css/style.css"/>

<script id="chartbox-receiver-template" type="text/x-handlebars-template">
	
	<div class="device-coon-desc">
		<i class="fa fa-bluetooth-b" aria-hidden="true"></i>
		<label>In-Use Gateways </label>
		<span class="table-page" data-table-name="receiver-table"><i class="fa fa-refresh refreshTable" aria-hidden="true"></i>\{{#if show_previous_button}}<i class="fa fa-caret-left rec-tablePreviousPage"></i>\{{/if}}&nbsp;\{{#if show_next_button}}<i class="fa fa-caret-right rec-tableNextPage"></i>\{{/if}}</span>
		<select class="tablelength" id="tablelength" data-target="#receiver-table">
			<option value="5">5</option>
			<option value="10" selected>10</option>
			<option value="25">25</option>
			<option value="50">50</option>
			<option value="100">100</option>
		</select>	 
			
	</div>

	<div class="tableSection">
			<div class="panel-heading">
                            
     		</div>
		<table class="table receiver-table" id="receiver-table" data-current-page="\{{current_page}}" data-row-limit="10">
			<thead>
				<tr class="sel_tbl1">
					<th onclick="sort_table('recid', 0, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(0)" class="width-40"># <i class="fa fa-arrow-up"></i></th>
					<!--<th>Name <i class="fa fa-arrow-up"></i></th>-->
				    <th onclick="sort_table('recid', 1, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(1)" class="ccs">Location <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('recid', 2, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(2)">UID <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('recid', 4, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl1(3)">Status <i class="fa fa-arrow-up"></i></th>
					<th>IP <i class="fa fa-arrow-up"></i></th>
					{{#if vpn}}
                    <th class="tunnel">Tunnel IP <i class="fa fa-arrow-up"></i></th>
					{{/if}}
                    {{#if INACTIVE_WRITE}}
					<th class="tableFilter addhide">
						<div class="onoffswitch UI-onofswitch">
						  	  <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" onchange="selectChildone(this)" id="CheckAll" data-children="uicheckchild">
							  <label class="onoffswitch-label" for="CheckAll">
							      <span class="onoffswitch-inner"></span>
							      <span class="onoffswitch-switch"></span>
							  </label>
						</div>
					</th>
					{{/if}}
					{{#if SYS_WRITE}}
					<th class="addhide">Action <i class="fa fa-arrow-up"></i></th>  
					<th class="addhide">Upgrade <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">SSH <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">Delete <i class="fa fa-arrow-up"></i></th>
					{{/if}}
		
				</tr>
			</thead>
			<tbody id="recid">
				\{{#each data}}
				<tr class="tr_aclrow" id="aclrow" mac-id="\{{mac_address}}" ap="\{{ap}}" uid="{{uid}}" cid="\{{cid}}">
					<td style="color: black;">\{{index}}</td>
					<td style="color: black;">\{{dev_name}}</td>
					       \{{#isguest guest}}
								<td style="cursor:pointer;color: black;">
									 \{{mac_address}}  
					    		</td>
						   \{{else}}
								<td style="cursor:pointer;color: black;" onclick="source('\{{guest}}','\{{mac_address}}','\{{cid}}')">
									<a class="LN1 LN2 LN3 LN4 LN5"> \{{mac_address}}  </a>
					    		</td>
						   \{{/isguest}}
					\{{#isguest guest}}				
					<td style="color: black;"> - </td>
					\{{else}}
					<td style="color: black;">\{{state}}</td>
					\{{/isguest}}
					\{{#isguest guest}}	
					<td style="color: black;"> - </td>
					\{{else}}
					<td style="color: black;">\{{ip}}</td>
                    \{{/isguest}}
                    {{#if vpn}}
					<td class="tunnel" style="color: black;">\{{tunnelip}}</td>
                    {{/if}}
					{{#if INACTIVE_WRITE}}
					\{{#isguest guest}}	
					<td style="color: black;"> - </td>
					\{{else}}
					<td>
						<div class="onoffswitch UI-onofswitch addhide">
						  	  <input type="checkbox" name="\{{mac_address}}" class="onoffswitch-checkbox uicheckchild" onchange="checkboxUpdate(this,'\{{guest}}')" id="ui-check-\{{index}}" data-children="uicheckchild" \{{debugflag}}>
							  <label class="onoffswitch-label" for="ui-check-\{{index}}">
							      <span class="onoffswitch-inner"></span>
							      <span class="onoffswitch-switch"></span>
							  </label>
						</div>
					</td>
					\{{/isguest}}
					{{/if}}
 					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a href="/facesix/web/finder/device/configure?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}&param=1" title="Configure"><i class="fa fa-cog fa-2x" style="color:black"></i></a>
		               </span>
					</td>
					{{/if}}
					{{#if BINARY_WRITE}}
					\{{#isguest guest}}
					<td style="color: black;"> - </td>
					\{{else}}
					<td class="addhide">
					<span>
		               <a onclick="binaryCheck('{{sid}}','{{spid}}','\{{mac_address}}','{{cid}}','\{{guest}}')" title="Upgrade"><i class="fa fa-download fa-2x" style="color:black"></i></a>
		            </span>
				    </td>
				    \{{/isguest}}
				    {{/if}}
					{{#if SYS_WRITE}}
					\{{#isguest guest}}
					<td style="color: black;"> - </td>
					\{{else}}
					<td class="addhide"><li><div class="pulse1" onclick="myFunction('\{{ip}}','\{{tunnelip}}','\{{cmd_enable}}')">SSH <br><i class="fa fa-terminal" aria-hidden="true"></i></div></li></td>
					\{{/isguest}}
					{{/if}}
					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a class="submitDelete submit1" href="/facesix/rest/beacon/device/delete?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}" title="Delete">
							<i class="fa fa-trash fa-2x"></i>
						</a>
		            </span>
				    </td>
				    {{/if}}
				</tr>
				\{{/each}}
			</tbody>

		</table>
	</div>	
	
</script>

<script id="chartbox-scanner-template" type="text/x-handlebars-template">
	
	<div class="device-coon-desc">
		<i class="fa fa-rss" aria-hidden="true"></i>
		<label>Scanners </label>
		<span class="table-page" data-table-name="scanner-table"><i class="fa fa-refresh acl-refreshTable" aria-hidden="true"></i>\{{#if show_previous_button}}<i class="fa fa-caret-left acl-tablePreviousPage"></i>\{{/if}}&nbsp;\{{#if show_next_button}}<i class="fa fa-caret-right acl-tableNextPage"></i>\{{/if}}</span>
	</div>

	<div class="tableSection">
			<div class="panel-heading">
                            
                        </div>
		<table class="table scanner-table" id="scanner-table" data-current-page="\{{current_page}}" data-row-limit="10">
			<thead>
				<tr class="sel_tbl2">
					<th onclick="sort_table('spotid', 0, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl2(0)" class="width-40"># <i class="fa fa-arrow-up"></i></th>
					<!--<th>Name <i class="fa fa-arrow-up"></i></th>-->
				    <th onclick="sort_table('spotid', 1, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl2(1)">Location <i class="fa fa-arrow-up"></i></th>					
					<th onclick="sort_table('spotid', 2, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl2(2)">UID <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('spotid', 4, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl2(3)">Status <i class="fa fa-arrow-up"></i></th>
					<th> IP <i class="fa fa-arrow-up"></i></th>
					{{#if vpn}}
                    <th>Tunnel IP <i class="fa fa-arrow-up"></i></th>
                    {{/if}}
					{{#if INACTIVE_WRITE}}
						<th class="tableFilter addhide">
							<div class="onoffswitch UI-onofswitch">
							  <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" onchange="selectChildScaner(this)" id="CheckAllScaner" data-children="uicheckchild1">
							  <label class="onoffswitch-label" for="CheckAllScaner">
								  <span class="onoffswitch-inner"></span>
								  <span class="onoffswitch-switch"></span>
							  </label>
							</div>
						</th>
					{{/if}}	
					{{#if SYS_WRITE}}
					<th class="addhide">Action <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">Upgrade <i class="fa fa-arrow-up"></i></th>					
					<th class="addhide">SSH <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">Delete <i class="fa fa-arrow-up"></i></th>
					{{/if}}
		
				</tr>
			</thead>
			<tbody id="spotid">
				\{{#each data}}
				<tr class="tr_aclrow" id="aclrow" mac-id="\{{mac_address}}" ap="\{{ap}}" uid="{{uid}}" cid="\{{cid}}">
					<td style="color: black;">\{{index}}</td>
					<td style="color: black;">\{{dev_name}}</td>
					<td style="cursor:pointer; color:black" onclick="source('\{{guest}}','\{{mac_address}}','\{{cid}}')">
					<a class="LN1 LN2 LN3 LN4 LN5">
					\{{mac_address}}  
					</a>
					</td>
					<td style="color: black;">\{{state}}</td>
					<td style="color: black;">\{{ip}}</td>
                    {{#if vpn}}
					<td style="color: black;">\{{tunnelip}}</td>
                    {{/if}}
					{{#if INACTIVE_WRITE}}
					<td>
						<div class="onoffswitch UI-onofswitch addhide">
						  <input type="checkbox" name="\{{mac_address}}" class="onoffswitch-checkbox uicheckchild1" onchange="checkboxUpdateScaner(this)" id="ui-checkScanner-\{{index}}" data-children="uicheckchild1" \{{debugflag}}>
						  <label class="onoffswitch-label" for="ui-checkScanner-\{{index}}">
							  <span class="onoffswitch-inner"></span>
							  <span class="onoffswitch-switch"></span>
						  </label>
						</div>
					</td>
					{{/if}}
 					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a href="/facesix/web/finder/device/configure?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}&param=1" title="Configure"><i class="fa fa-cog fa-2x" style="color:black"></i></a>
		               </span>
					</td>
					{{/if}}
					{{#if BINARY_WRITE}}
					<td class="addhide">
					<span>
		               <a href="/facesix/web/finder/device/binary?sid={{sid}}&spid={{spid}}&uid=\{{mac_address}}&cid={{cid}}" title="Upgrade"><i class="fa fa-download fa-2x" style="color:black"></i></a>
		            </span>
				    </td>
				    {{/if}}	
				    {{#if SYS_WRITE}}				
					<td class="addhide"><li><div class="pulse1" onclick="myFunction('\{{ip}}','\{{tunnelip}}','\{{cmd_enable}}')">SSH <br><i class="fa fa-terminal" aria-hidden="true"></i></div></li></td>
					{{/if}}
					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a class="submitDelete submit1" href="/facesix/rest/beacon/device/delete?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}" title="Delete">
							<i class="fa fa-trash fa-2x"></i>
						</a>
		            </span>
				    </td>
				    {{/if}}
				</tr>
				\{{/each}}
			</tbody>

		</table>
	</div>	

</script>

<script id="chartbox-server-template" type="text/x-handlebars-template">
	
	<div class="device-coon-desc">
		<i class="fa fa-server" aria-hidden="true"></i>
		<label>Servers </label>
		<span class="table-page" data-table-name="server-table"><i class="fa fa-refresh bl-refreshTable"" aria-hidden="true"></i>\{{#if show_previous_button}}<i class="fa fa-caret-left ser-tablePreviousPage"></i>\{{/if}}&nbsp;\{{#if show_next_button}}<i class="fa fa-caret-right ser-tableNextPage"></i>\{{/if}}</span>
					
	</div>

	<div class="tableSection">
			<div class="panel-heading">
                            
                        </div>
		<table class="table server-table" id="server-table" data-current-page="\{{current_page}}" data-row-limit="10">
			<thead>
				<tr class="sel_tbl3">
					<th onclick="sort_table('serid', 0, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl3(0)" class="width-40"># <i class="fa fa-arrow-up"></i></th>
					<!--<th>Name <i class="fa fa-arrow-up"></i></th>-->
				    <th onclick="sort_table('serid', 1, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl3(1)">Location <i class="fa fa-arrow-up"></i></th>					
					<th onclick="sort_table('serid', 2, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl3(2)">UID <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('serid', 4, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl3(3)">Status <i class="fa fa-arrow-up"></i></th>
					<th> IP <i class="fa fa-arrow-up"></i></th>
                    {{#if vpn}}
					<th>Tunnel IP <i class="fa fa-arrow-up"></i></th>
                    {{/if}}
					{{#if INACTIVE_WRITE}}
						<th class="tableFilter addhide">
							<div class="onoffswitch UI-onofswitch">
							  <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" onchange="selectChildServers(this)" id="CheckAllServers" data-children="uicheckchild2" \{{debugflag}}>
							  <label class="onoffswitch-label" for="CheckAllServers">
								  <span class="onoffswitch-inner"></span>
								  <span class="onoffswitch-switch"></span>
							  </label>
							</div>
						</th>
					{{/if}}	
					{{#if SYS_WRITE}}
					<th class="addhide">Action <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">Upgrade <i class="fa fa-arrow-up"></i></th>		
					<th class="addhide">SSH <i class="fa fa-arrow-up"></i></th>                 
					<th class="addhide">Delete <i class="fa fa-arrow-up"></i></th>
					{{/if}}
		
				</tr>
			</thead>
			<tbody id="serid">
				\{{#each data}}
				<tr class="tr_aclrow" id="aclrow" mac-id="\{{mac_address}}" ap="\{{ap}}" uid="{{uid}}" cid="\{{cid}}">
					<td style="color: black;">\{{index}}</td>
					<td style="color: black;">\{{dev_name}}</td>
					<td style="cursor:pointer" onclick="source('false','\{{mac_address}}','\{{cid}}')">
					<a class="LN1 LN2 LN3 LN4 LN5">
					\{{mac_address}}  
					</a>
					</td>
					<td style="color: black;">\{{state}}</td>
					<td style="color: black;">\{{ip}}</td>
                    {{#if vpn}}
					<td style="color: black;">\{{tunnelip}}</td>
                    {{/if}}
					{{#if INACTIVE_WRITE}}
					<td>
						<div class="onoffswitch UI-onofswitch addhide">
						  <input type="checkbox" name="\{{mac_address}}" class="onoffswitch-checkbox uicheckchild2" onchange="checkboxUpdateServers(this,'\{{guest}}')" id="ui-checkServers-\{{index}}" data-children="uicheckchild2" \{{debugflag}}>
						  <label class="onoffswitch-label" for="ui-checkServers-\{{index}}">
							  <span class="onoffswitch-inner"></span>
							  <span class="onoffswitch-switch"></span>
						  </label>
						</div>
					</td>
					{{/if}}
 					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a href="/facesix/web/finder/device/configure?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}&param=1" title="Configure"><i class="fa fa-cog fa-2x" style="color:black"></i></a>
		               </span>
					</td>
					{{/if}}
					{{#if BINARY_WRITE}}
					<td class="addhide">
					<span>
		               <a onclick="binaryCheck('{{sid}}','{{spid}}','\{{mac_address}}','{{cid}}','\{{guest}}')" title="Upgrade"><i class="fa fa-download fa-2x" style="color:black"></i></a>
		            </span>
				    </td>
				    {{/if}}					
					{{#if SYS_WRITE}}
					<td class="addhide"><li><div class="pulse1" onclick="myFunction('\{{ip}}','\{{tunnelip}}','\{{cmd_enable}}')">SSH <br><i class="fa fa-terminal" aria-hidden="true"></i></div></li></td>
					<td class="addhide">
					<span>
		               <a class="submitDelete submit1" href="/facesix/rest/beacon/device/delete?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}" title="Delete">
							<i class="fa fa-trash fa-2x"></i>
						</a>
		            </span>
				    </td>
				    {{/if}}
				</tr>
				\{{/each}}
			</tbody>

		</table>
	</div>	
	
</script>

<script id="chartbox-register-template" type="text/x-handlebars-template">
	
	<div class="device-coon-desc">
		<i class="fa fa-server" aria-hidden="true"></i>
		<label>Registered  Gateways to cloud</label>
		<span class="table-page" data-table-name="register-table"><i class="fa fa-refresh reg-refreshTable"" aria-hidden="true"></i>\{{#if show_previous_button}}<i class="fa fa-caret-left reg-tablePreviousPage"></i>\{{/if}}&nbsp;\{{#if show_next_button}}<i class="fa fa-caret-right reg-tableNextPage"></i>\{{/if}}</span>
					
	</div>

	<div class="tableSection">
			<div class="panel-heading">
                            
                        </div>
		<table class="table register-table" id="register-table" data-current-page="\{{current_page}}" data-row-limit="10">
			<thead>
				<tr class="sel_tbl4">
					<th onclick="sort_table('regid', 0, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl4(0)" class="width-40"># <i class="fa fa-arrow-up"></i></th>
				    <th onclick="sort_table('regid', 1, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl4(1)">Location <i class="fa fa-arrow-up"></i></th>					
					<th onclick="sort_table('regid', 2, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl4(2)">UID <i class="fa fa-arrow-up"></i></th>
					<th onclick="sort_table('regid', 3, asc1); asc1 *= -1; asc2 = 1; asc3 = 1; sel_tbl4(3)">Configured? <i class="fa fa-arrow-up"></i></th>
					{{#if SYS_WRITE}}
					<th class="addhide">Action <i class="fa fa-arrow-up"></i></th>
					<th class="addhide">Delete <i class="fa fa-arrow-up"></i></th>
					{{/if}}
		
				</tr>
			</thead>
			<tbody id="regid">
				\{{#each data}}
				<tr class="tr_aclrow" id="aclrow" mac-id="\{{mac_address}}" ap="\{{ap}}" uid="{{uid}}" cid="\{{cid}}">
					<td>\{{index}}</td>
					<td>\{{dev_name}}</td>
					<td>\{{mac_address}}</td>
					<td>\{{status}}</td>
 					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a href="/facesix/web/finder/device/configure?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}&param=1" title="Configure"><i class="fa fa-cog fa-2x" style="color:black"></i></a>
		               </span>
					</td>
					{{/if}}
					{{#if SYS_WRITE}}
					<td class="addhide">
					<span>
		               <a class="submitDelete submit1" href="/facesix/rest/beacon/device/delete?uid=\{{mac_address}}&cid={{cid}}&sid={{sid}}&spid={{spid}}" title="Delete">
							<i class="fa fa-trash fa-2x"></i>
						</a>
		            </span>
				</td>
				{{/if}}
				</tr>
				\{{/each}}
			</tbody>

		</table>
	</div>	
	
</script>

</div>

<script>
var client_id = $('input[name="cid"]').val();  

function myFunction(ip,tunnelip,cmd) {
	//console.log ("Command" + cmd + "ip" + ip + "tunnelip "+tunnelip)
    var vpn = '{{vpn}}';

	if (cmd === "1") {

       if(vpn == "true"){
        var str = 'http://' + tunnelip + ':4200';
        } else {
        var str = 'http://' + ip + ':4200';
        }
        //window.open(str, 'SSH', 'width=900,height=500');
		window.open(str, ip, 'location=1;width=900,height=500');
	}
}

function source(guest,mac,cid){
  var g = guest;
  if(g == "false"){
		location.href='/facesix/web/finder/device/devboard?uid='+mac+'&cid='+cid+'&mid=1';
  } 
}

function binaryCheck(sid,spid,mac,cid,guest){
	var g = guest;
	if(g == "false"){
		location.href='/facesix/web/finder/device/binary?sid='+sid+'&spid='+spid+'&uid='+mac+'&cid='+cid;
	}
}
var checkedValues = [];
var dbgVal; 	
function selectChildone(e){
	$(".saveareaone").show();
	dbgVal = e;
	console.log(dbgVal);
}


function selectChild(){ 
	console.log("hi" + dbgVal)
	
	var target = $(dbgVal).attr('data-children'); 
	var debugflag = 'false';
	
	if($(dbgVal).prop('checked') === true)
	{ 
		$.each(DeviceACL.receiverClientsTable, function(index, optionValue) {   
			checkedValues.push(optionValue.mac_address);
		}); 
		debugflag = 'true';
		
	}else{
		checkedValues = [];
		$('.'+target).prop('checked', false);
		debugflag = 'false';
	}
	
	$.each(checkedValues, function(index, optionValue) {   
		$('.'+target+'[name="'+optionValue+'"]').prop('checked', true);
	});  
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValues); 
	
	if(DeviceACL.receiverClientsTable.length <= checkedValues.length){
		debugflag = 'true'; 
	}
	if(checkedValues.length == 0){
		debugflag = 'false'; 
	}  
	if((DeviceACL.receiverClientsTable.length <= checkedValues.length) || (checkedValues.length == 0)){ 
 
		var result = $.ajax({
			url: '/facesix/rest/beacon/device/debugByDevices?cid='+client_id+'&debugflag='+debugflag+'&type=receiver',
			type : "POST",
			processData : false,
			contentType : false,
			success : function(result) {
				 console.log(result);
			},
			error : function(result) {
				 console.log(result);
			}
		});
	}
	  
	$(".saveareaone").hide();
	
} 

$('#cancel').on('click',function(){
	
	if($('#CheckAll').prop('checked') == true){
		$('#CheckAll').prop('checked',false)
		console.log("true")
	}else{
		$('#CheckAll').prop('checked',true)
		console.log("false")
	}
	$(".saveareaone").hide();
})

function checkboxUpdate(e,guest){
	if(guest == "false"){

	var debugflag = 'false'; 
	var device_id = $(e).attr('name');
	if($(e).prop('checked') == true){
		debugflag = 'true';
	}else{
		debugflag = 'false';
	}
	 
	var result = $.ajax({
		url: '/facesix/rest/beacon/device/debugByDevices?uid='+device_id+'&debugflag='+debugflag,
		type : "POST",
		processData : false,
		contentType : false,
		success : function(result) {
			 console.log(result);
		},
		error : function(result) {
			 console.log(result);
		}
	});
	
	var parentCount = 0;
	var target = $(e).attr('data-children'); 
	$('.'+target).each(function(){
		if($(this).prop('checked') == true)
		{
			var index = checkedValues.indexOf($(this).attr('name'));
			if (index == -1) {
				checkedValues.push($(this).attr('name'));
			}
		}
		else 
		{
			var index = checkedValues.indexOf($(this).attr('name')); 
			if (index > -1) {
				checkedValues.splice(index, 1);
			} 
			$('#CheckAll').prop('checked', false); 
			parentCount = parentCount + 1;
		}
		
	});
	
	if(DeviceACL.receiverClientsTable.length <= checkedValues.length){
		$('#CheckAll').prop('checked', true); 
	}
	
	/* if(parentCount === 0){
		$('#CheckAll').prop('checked', true); 
	}
	else{
		$('#CheckAll').prop('checked', false); 
	} */
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValues); 
} else {
	$(e).prop('checked',false);
}
}


var checkedValuesScaner = [];
function selectChildScaner(e){ 
	
	var target = $(e).attr('data-children'); 
	var debugflag = 'false';
	
	if($(e).prop('checked') === true)
	{  
		$.each(DeviceACL.activeClientsData, function(index, optionValue) {   
			checkedValuesScaner.push(optionValue.mac_address);
		}); 
		debugflag = 'true';
		
	}else{
		checkedValuesScaner = [];
		$('.'+target).prop('checked', false);
	}
	
	$.each(checkedValuesScaner, function(index, optionValue) {   
		$('.'+target+'[name="'+optionValue+'"]').prop('checked', true);
	});  
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValuesScaner); 
	
	if(DeviceACL.activeClientsData.length <= checkedValuesScaner.length){
		debug_flag = 'true';
	}
	if(checkedValuesScaner.length == 0){
		debugflag = 'false'; 
	}
	if((DeviceACL.activeClientsData.length <= checkedValuesScaner.length) || (checkedValuesScaner.length == 0)){ 
		
		var result = $.ajax({
			url: '/facesix/rest/beacon/device/debugByDevices?cid='+client_id+'&debugflag='+debugflag+'&type=scanner',
			type : "POST",
			processData : false,
			contentType : false,
			success : function(result) {
				 console.log(result);
			},
			error : function(result) {
				 console.log(result);
			}
		});
	}
	  
	
} 

function checkboxUpdateScaner(e){
	var debugflag = 'false'; 
	
	var device_id = $(e).attr('name');
	if($(e).prop('checked') == true){
		debugflag = 'true';
	}
	 
	var result = $.ajax({
		url: '/facesix/rest/beacon/device/debugByDevices?uid='+device_id+'&debugflag='+debugflag,
		type : "POST",
		processData : false,
		contentType : false,
		success : function(result) {
			 console.log(result);
		},
		error : function(result) {
			 console.log(result);
		}
	});
	
	var parentCount = 0;
	var target = $(e).attr('data-children'); 
	$('.'+target).each(function(){
		if($(this).prop('checked') == true)
		{
			var index = checkedValuesScaner.indexOf($(this).attr('name'));
			if (index == -1) {
				checkedValuesScaner.push($(this).attr('name'));
			}
		}
		else 
		{
			var index = checkedValuesScaner.indexOf($(this).attr('name')); 
			if (index > -1) {
				checkedValuesScaner.splice(index, 1);
			} 
			$('#CheckAllScaner').prop('checked', false); 
			parentCount = parentCount + 1;
		}
		
	});
	

	
	if(DeviceACL.activeClientsData.length <= checkedValuesScaner.length){
		$('#CheckAllScaner').prop('checked', true); 
	}
	
	/* if(parentCount === 0){
		$('#CheckAll').prop('checked', true); 
	}
	else{
		$('#CheckAll').prop('checked', false); 
	} */
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValuesScaner); 
}



var checkedValuesServers = [];
function selectChildServers(e){ 
	
	var target = $(e).attr('data-children'); 
	var debugflag = 'false';
	var val = $(e).prop('checked');
	console.log("value is "+val);
	if($(e).prop('checked') === true)
	{  
		$.each(DeviceACL.serverClientsData, function(index, optionValue) {   
			checkedValuesServers.push(optionValue.mac_address);
		}); 
		debugflag = 'true';
		
	}else{
		checkedValuesServers = [];
		$('.'+target).prop('checked', false);
		debugflag = 'false';
	}
	
	$.each(checkedValuesServers, function(index, optionValue) {   
		$('.'+target+'[name="'+optionValue+'"]').prop('checked', true);
	});  
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValuesServers); 
	
	if(DeviceACL.serverClientsData.length <= checkedValuesServers.length){
		debugflag = 'true'; 
	}

	console.log("debug flag "+debugflag);
	if((DeviceACL.serverClientsData.length <= checkedValuesServers.length) || (checkedValuesServers.length == 0)){ 
	
		var result = $.ajax({
			url: '/facesix/rest/beacon/device/debugByDevices?cid='+client_id+'&debugflag='+debugflag+'&type=server',
			type : "POST",
			processData : false,
			contentType : false,
			success : function(result) {
				 console.log(result);
			},
			error : function(result) {
				 console.log(result);
			}
		});
	}
	  
	
} 

function checkboxUpdateServers(e,guest){
	if(guest == "false"){

	var debugflag = 'false'; 	
	var device_id = $(e).attr('name');
	if($(e).prop('checked') == true){
		debugflag = 'true';
	}
	 
	var result = $.ajax({
		url: '/facesix/rest/beacon/device/debugByDevices?uid='+device_id+'&debugflag='+debugflag,
		type : "POST",
		processData : false,
		contentType : false,
		success : function(result) {
			 console.log(result);
		},
		error : function(result) {
			 console.log(result);
		}
	});
	
	var parentCount = 0;
	var target = $(e).attr('data-children'); 
	$('.'+target).each(function(){
		if($(this).prop('checked') == true)
		{
			var index = checkedValuesServers.indexOf($(this).attr('name'));
			if (index == -1) {
				checkedValuesServers.push($(this).attr('name'));
			}
		}
		else 
		{
			var index = checkedValuesServers.indexOf($(this).attr('name')); 
			if (index > -1) {
				checkedValuesServers.splice(index, 1);
			} 
			$('#CheckAllServers').prop('checked', false); 
			parentCount = parentCount + 1;
		}
		
	});
	
	if(DeviceACL.serverClientsData.length <= checkedValuesServers.length){
		$('#CheckAllServers').prop('checked', true); 
	}
	
	
	/* if(parentCount === 0){
		$('#CheckAll').prop('checked', true); 
	}
	else{
		$('#CheckAll').prop('checked', false); 
	} */
	
	var uniqueArray = function(arrArg) {
		  return arrArg.filter(function(elem, pos,arr) {
		    return arr.indexOf(elem) == pos;
		  });
		};

		var uniqEs6 = (arrArg) => {
		  return arrArg.filter((elem, pos, arr) => {
		    return arr.indexOf(elem) == pos;
	 	});
	} 
	uniqueArray(checkedValuesServers); 
} else {
	$(e).prop('checked',false);
}
}
$(document).ready(function(){
	$('.col-md-15').hide();

	var addDevice = $(".addDevice").val(1);
});
</script>
<!-- loader box -->
<link rel="stylesheet" href="/facesix/static/geo/css/loader.css">
<div class="loader_boxtwo" style="display: none;">	
	<div class="loader"></div>
	<h4 class="text-center">Loading Gateways Lists...</h4>
</div>
<!-- /.row -->
        
{{/partial}}

{{>qubercomm/nav-top}}
{{>qubercomm/nav-left}}
{{>qubercomm/wrapper}}